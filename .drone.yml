kind: pipeline
type: docker
name: build
platform:
  os: linux
  arch: amd64
steps:
  -  name: Debug
     image: openjdk:jdk-slim
     commands:
       - cd ./packages/server
       - ls 
       - ls ./build
  -  name: ZenSpace Build âœ¨
     image: openjdk:jdk-slim
     commands:
       - cd ./packages/server
       - chmod +x gradlew
       - ./gradlew build 
  -  name: ZenSpace Test ğŸ—’ï¸     
     image: openjdk:jdk-slim
     commands: 
       - cd ./packages/server
       - chmod +x gradlew
       - ./gradlew check
  -  name: ZenSpace Build JAR ğŸ—ï¸
     image: openjdk:jdk-slim
     commands:
       - cd ./packages/server
       - chmod +x gradlew
       - ./gradlew shadowJar
  -  name: ZenSpace Run JAR âœ…
     image: openjdk:jdk-slim
     commands: 
       - cd ./packages/server
       - java -jar ./build/libs/zenspaceapi.jar -Xmx2G -Xms500M
